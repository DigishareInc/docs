---
title: Import
description: Bulk import Third entities from spreadsheets with custom fields support.
icon: i-lucide-upload
---

# Import Thirds

Bulk import contacts from CSV or Excel files. The import is processed asynchronously via a queue.

---

## Import Endpoint

::api-playground{method="POST" url="https://api.digishare.ma/v1/thirds/import" description="Import contacts from a spreadsheet file." :variables='{"token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"file": "BASE64_ENCODED_FILE"}'}
::

### Request Body

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `file` | string | Yes | Base64-encoded file content (CSV, XLSX) |
| `company_id` | string | No | Target company ID (defaults to authenticated user's company) |

### Response

Returns `204 No Content` immediately. The import is processed in the background.

---

## File Format

Your spreadsheet must include a header row. Here are the supported columns:

### Standard Columns

| Column | Description |
|--------|-------------|
| `id` | Existing third ID (for updates) |
| `ext_ref` | External reference (for matching) |
| `first_name` | First name |
| `last_name` | Last name |
| `name` | Full name |
| `email` | Email address |
| `mobile` | Mobile phone |
| `phone` | Landline phone |
| `wa_id` | WhatsApp ID |
| `address` | Address |
| `status` | Active status (true/false) |
| `premium` | Premium flag (true/false) |
| `verified` | Verified flag (true/false) |
| `is_company` | Company flag (true/false) |
| `tags` | Tags (semicolon-separated: `vip;customer;lead`) |
| `wa_ids` | Additional WhatsApp IDs (semicolon-separated) |
| `city_id` | City ID (hashed) |
| `country_id` | Country ID (hashed) |
| `state_id` | State ID (hashed) |
| `source_id` | Source ID (hashed) |

### Custom Field Columns

Add custom fields by prefixing column names with `cf_` or `custom_`:

| Column | Stored As |
|--------|-----------|
| `cf_balance` | `balance` |
| `cf_loyalty_tier` | `loyalty_tier` |
| `custom_is_vip` | `is_vip` |

---

## Example Spreadsheet

| first_name | last_name | email | mobile | cf_balance | cf_loyalty_tier |
|------------|-----------|-------|--------|------------|-----------------|
| John | Doe | john@example.com | +212612345678 | 150.75 | gold |
| Jane | Smith | jane@example.com | +212698765432 | 50.00 | silver |
| Acme Inc | | contact@acme.com | +212522123456 | 500.00 | platinum |

---

## Import Behavior

### Matching Existing Records

The import automatically matches existing records by:

1. **`id`** - If provided, updates the existing record
2. **`ext_ref`** - Matches by external reference within the company
3. **`wa_id`** - Matches by WhatsApp ID within the company

If no match is found, a new record is created.

### Custom Fields Sync

Custom fields (columns with `cf_` or `custom_` prefix) are:

- Automatically synced to the Custom Fields database
- Type-inferred from values:
  - `true`, `yes`, `1`, `oui` → boolean `true`
  - `false`, `no`, `0`, `non` → boolean `false`
  - Numbers with decimals → `float`
  - Whole numbers → `int`
  - Other → `string`
- Field definitions are auto-created if they don't exist

::tip
**Filterable after import.** Once imported, you can filter contacts by custom fields using the `custom_filters` parameter.
::

---

## cURL Example

```bash
# Encode your file to base64
BASE64_FILE=$(base64 -w 0 contacts.csv)

# Import
curl -X POST "https://api.digishare.ma/v1/thirds/import" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d "{
    \"file\": \"$BASE64_FILE\"
  }"
```

---

## Error Handling

| Status | Description |
|--------|-------------|
| `204` | Import queued successfully |
| `400` | Invalid file format |
| `401` | Unauthorized |
| `422` | Validation error (file required) |

::note
**Async Processing.** The import runs in the background. Large files may take several minutes to process completely.
::

---

## Related

::card-group
::card{title="CRUD Operations" icon="i-lucide-database" to="/developer-guides/thirds/crud"}
Create individual contacts via API.
::

::card{title="Custom Fields" icon="i-lucide-tags" to="/developer-guides/thirds/custom-fields"}
Learn about custom fields and filtering.
::
::
