---
title: WhatsApp Campaigns (PDF)
description: Orchestrate high-volume WhatsApp campaigns with dynamic PDF attachments.
icon: i-lucide-megaphone
---

This guide demonstrates how to send a WhatsApp campaign with a PDF attachment.

::note
**Prerequisites**:

- Valid **Bearer Token**
- Approved **Message Template ID** (e.g., `YOUR_TEMPLATE_ID`)
- **Sender Label ID** (e.g., `YOUR_SENDER_ID`)
  ::

## Method 1: Embedded Base64

Send a file directly in the payload without prior upload. Ideal for one-off files generated on the fly.

::steps

### Encode PDF

Convert your PDF file to a Base64 string.

### Construct Payload

Add the encoded string to the `base64_files` object.

### Send Request

The key used in `base64_files` (e.g., `invoice_file_123`) must match the header variable ID.
::

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/campaigns \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Invoice Campaign",
    "message_template_id": "YOUR_TEMPLATE_ID",
    "base64_files": {
      "YOUR_FILE_MAP_KEY": {
        "base64": "data:application/pdf;base64,JVBERi0xLjQKJ...",
        "file_name": "invoice",
        "mime_type": "application/pdf",
        "extension": "pdf"
      }
    },
    "contacts_and_data": {
      "data": {
        "header": { "id": "YOUR_FILE_MAP_KEY" },
        "wa_id": "%recipient.wa_id%"
      },
      "contacts": [
        { "wa_id": "212600000000" }
      ]
    }
  }'
```

::

## Method 2: Two-Step Upload

Upload the file first to get a `media_id`, then use that ID in your campaign. Better for large files or reused assets.
::tip
Use the **Embedded method** for small PDFs and the **Two-step method** for larger files to ensure better performance.
::
::steps

### Upload File

POST to `/messagesTemplates` with your file content. Save the returned `id`.

### Send Campaign

Use the returned `id` in the `header.id` field of your campaign payload.
::

### Step 1: Upload

::code-group

```bash [Upload Request]
curl -X POST https://api.digishare.ma/v1/messagesTemplates \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "type": "file",
    "category": "document",
    "file": {
      "base64": "...",
      "file_name": "invoice",
      "mime_type": "application/pdf"
    }
  }'
```

::

### Step 2: Send

```bash [Send Request]
curl -X POST https://api.digishare.ma/v1/campaigns \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Invoice Campaign",
    "contacts_and_data": {
      "data": {
        "header": {
          "id": "MEDIA_ID_FROM_STEP_1"
        }
      }
    }
  }'
```
