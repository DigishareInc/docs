---
title: WhatsApp Campaigns (PDF)
description: Orchestrate high-volume WhatsApp campaigns with dynamic PDF attachments.
icon: i-lucide-megaphone
---

This guide demonstrates how to send a WhatsApp campaign with a PDF attachment.

::note
**Prerequisites**:

- Valid **Bearer Token**
- Approved **Message Template ID** (e.g., `YOUR_TEMPLATE_ID`)
- **Sender Label ID** (e.g., `YOUR_SENDER_ID`)
::

## Method 1: Embedded Base64

Send a file directly in the payload without prior upload. Ideal for one-off files generated on the fly.

::steps

### Encode PDF

Convert your PDF file to a Base64 string.

### Construct Payload

Add the encoded string to the `base64_files` object.

### Send Request

The key used in `base64_files` (e.g., `invoice_file_123`) must match the header variable ID.
::

::api-playground{method="POST" url="https://api.digishare.ma/v1/campaigns" description="Send a campaign with an embedded Base64 PDF file." :variables='{"token": "YOUR_TOKEN", "templateId": "YOUR_TEMPLATE_ID", "fileMapKey": "invoice_file_123"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"title": "Invoice Campaign", "message_template_id": "{templateId}", "base64_files": {"{fileMapKey}": {"base64": "data:application/pdf;base64,JVBERi0xLjQKJ...", "file_name": "invoice", "mime_type": "application/pdf", "extension": "pdf"}}, "contacts_and_data": {"data": {"header": {"id": "{fileMapKey}"}, "wa_id": "%recipient.wa_id%"}, "contacts": [{"wa_id": "212600000000"}]}}'}
::

## Method 2: Two-Step Upload

Upload the file first to get a `media_id`, then use that ID in your campaign. Better for large files or reused assets.

::tip
Use the **Embedded method** for small PDFs and the **Two-step method** for larger files to ensure better performance.
::

::steps

### Upload File

POST to `/messagesTemplates` with your file content. Save the returned `id`.

### Send Campaign

Use the returned `id` in the `header.id` field of your campaign payload.
::

### Step 1: Upload

::api-playground{method="POST" url="https://api.digishare.ma/v1/messagesTemplates" description="Upload a PDF file to get a media ID for reuse." :variables='{"token": "YOUR_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"type": "file", "category": "document", "file": {"base64": "data:application/pdf;base64,JVBERi0xLjQKJ...", "file_name": "invoice", "mime_type": "application/pdf", "extension": "pdf"}}'}
::

> **Response**: Save the returned `data.id`.

### Step 2: Send

::api-playground{method="POST" url="https://api.digishare.ma/v1/campaigns" description="Send a campaign using the pre-uploaded media ID." :variables='{"token": "YOUR_TOKEN", "mediaId": "MEDIA_ID_FROM_STEP_1"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"title": "Invoice Campaign", "contacts_and_data": {"data": {"header": {"id": "{mediaId}"}}, "contacts": [{"wa_id": "212600000000"}]}}'}
::
