---
title: WhatsApp Campaigns
description: Orchestrate high-volume WhatsApp campaigns using message templates.
icon: i-lucide-smartphone
---

This guide demonstrates how to send a WhatsApp campaign using pre-approved templates. This is the standard method for high-volume broadcasts and marketing notifications.

::note
**Prerequisites**:

- Valid **Bearer Token**
- Approved **Message Template ID** (e.g., `YOUR_TEMPLATE_ID`)
- **Sender Label ID** (e.g., `YOUR_SENDER_ID`) representing your WhatsApp channel.
  ::

## 1. Payload Structure

To send a campaign, you POST a JSON payload to `/v1/campaigns`.

### Common Variables

- `title`: A name for the campaign (for internal tracking).
- `contacts_and_data`: Contains the message configuration and recipient list.
- `_`: (Inside `contacts_and_data`) Global configuration for the campaign.
  - `channel`: `whatsapp`
  - `sender_label_id`: The ID of your sending channel.
  - `message_template_id`: The ID of the template you want to send.

## 2. Example: Standard Template

If your template is a simple text message with a variable like `Hello {{1}}, your order {{2}} is ready.`, the payload would look like this:

::api-playground{method="POST" url="https://api.digishare.ma/v1/campaigns" description="Send a WhatsApp campaign to multiple recipients using a pre-approved template." :variables='{"token": "YOUR*TOKEN", "senderId": "YOUR_SENDER_ID", "templateId": "YOUR_TEMPLATE_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"title": "Welcome Campaign", "contacts_and_data": {"*": {"channel": "whatsapp", "sender_label_id": "{senderId}", "message_template_id": "{templateId}"}, "contacts": [{"wa_id": "212600000000", "data": {"1": "John", "2": "ORD-123"}}, {"wa_id": "212600000001", "data": {"1": "Jane", "2": "ORD-456"}}]}}'}
::

## 3. Dynamic Variables

Standard WhatsApp templates often use numbered variables (`{{1}}`, `{{2}}`). In your `contacts` list, you provide these values in the `data` object for each recipient.

::tip
Always ensure the number of variables in your `data` object matches the expected variables in your approved template to avoid delivery failures.
::

## 4. Scheduling (Optional)

You can schedule a campaign for the future by adding a `start_datetime` property (ISO 8601 format) to the top-level payload.

```json
{
  "title": "Scheduled Campaign",
  "start_datetime": "2025-06-01T10:00:00Z",
  "contacts_and_data": { ... }
}
```

## 5. Conversation Tags

You can automatically assign tags to the conversation generated by this campaign by adding `conversation_tags` to the global configuration `_`.

```json
{
  "contacts_and_data": {
    "_": {
      "channel": "whatsapp",
      "conversation_tags": ["urgent", "sales_lead", "vip"]
    }
  }
}
```

### How it works

- **Direct Conversation**: If the message creates a new conversation immediately, the tags are attached instantly.
- **Triggers**: If you use a conversation trigger like `any-reply`, the tags will be stored and applied **when the user replies** and the conversation is actually created or updated.
