---
title: Outgoing Messages
description: Detailed reference for sending text, location, and interactive messages via API.
icon: i-lucide-send
---

::warning
**Prerequisite**: You must have an active Conversation ID to reply to a user. See [LiveChat Integration](/developer-guides/livechat/integration).
::

## 1. Message Envelope

Every API request uses this standard structure.

| Field             | Type          | Description                                                  |
| :---------------- | :------------ | :----------------------------------------------------------- |
| `send_to_third`   | Boolean       | Set `true` to deliver via external platform (e.g. WhatsApp). |
| `conversation_id` | String        | Unique ID for the chat session.                              |
| `type`            | String        | Message format: `text`, `location`, or `interactive`.        |
| `body`            | String/Object | The content payload (varies by type).                        |

## 2. Text Message

Simple text communication. The `body` is a **string**.

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "send_to_third": true,
    "conversation_id": "YOUR_CONVERSATION_ID",
    "type": "text",
    "body": "Hello Adil! Your order is ready."
  }'
```

::

## 3. Location Message

Send a static map pin.

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "send_to_third": true,
    "conversation_id": "YOUR_CONVERSATION_ID",
    "type": "location",
    "body": {
      "latitude": 33.5731,
      "longitude": -7.5898,
      "name": "Digishare HQ",
      "address": "Casablanca, Morocco"
    }
  }'
```

::

## 4. Interactive Messages

Structured messages for enhanced engagement.

::accordion
::accordion-item{label="Reply Buttons" icon="i-lucide-mouse-pointer-2"}
Best for quick confirmations (Yes/No). Maximum 3 buttons.

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "interactive",
    "body": {
      "type": "button",
      "header": { "type": "text", "text": "Confirmation" },
      "body": { "text": "Do you confirm receipt?" },
      "action": {
        "buttons": [
          { "type": "reply", "reply": { "id": "btn_yes", "title": "Yes" } },
          { "type": "reply", "reply": { "id": "btn_no", "title": "No" } }
        ]
      }
    }
  }'
```

::

::accordion-item{label="List Menu" icon="i-lucide-list"}
Best for multiple options (up to 10 rows).

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "interactive",
    "body": {
      "type": "list",
      "header": { "type": "text", "text": "Support Menu" },
      "body": { "text": "Choose a category below:" },
      "action": {
        "button": "Select Option",
        "sections": [
          {
            "title": "Technical Support",
            "rows": [
              {
                "id": "row_1",
                "title": "API Issues",
                "description": "Help with integration"
              },
              { "id": "row_2", "title": "Login", "description": "Account access" }
            ]
          }
        ]
      }
    }
  }'
```

::

::accordion-item{label="Location Request" icon="i-lucide-map-pin"}
Triggers the native "Send Location" interface.

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "interactive",
    "body": {
      "type": "location_request_message",
      "body": { "text": "Please share your current location." },
      "action": { "name": "send_location" }
    }
  }'
```

::
::

## 5. Constraints

| Type            | Component        | Limit           |
| :-------------- | :--------------- | :-------------- |
| **Text**        | `body`           | 4096 Characters |
| **Interactive** | `header`         | 60 Characters   |
| **Interactive** | `button` title   | 20 Characters   |
| **Interactive** | `list` row title | 24 Characters   |
