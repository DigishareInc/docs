---
title: LiveChat Integration
description: Enable real-time communication by integrating your system with Digishare LiveChat.
icon: i-lucide-message-circle
---

This guide outlines the technical integration with the Digishare LiveChat system. The integration is bidirectional:

1.  **Webhooks**: Your system listens for real-time events (New Conversations, Incoming Messages).
2.  **API**: Your system sends replies back to the user via the Digishare API.

::note
Ensure you have your **Access Token** ready. See [Authentication](/developer-guides/authentication) for details.
::

## 1. Webhooks

Your system must expose a **POST** endpoint to receive event payloads from Digishare.

### Events

::accordion
::accordion-item{label="New Conversation" icon="i-lucide-plus"}
**Event**: `live_chat.new_conversation`

Triggered when a user initiates a new conversation. Use the `data.id` (Conversation ID) to send replies.

**Payload:**

```json
{
  "event": "live_chat.new_conversation",
  "data": {
    "id": "YOUR_CONVERSATION_ID",
    "data": {
      "created_at": "2025-12-03T12:28:50.000000Z",
      "third": {
        "id": "YOUR_THIRD_ID",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::

::accordion-item{label="Incoming Message" icon="i-lucide-arrow-down-left"}
**Event**: `live_chat.new_message`

Triggered when a customer sends a message.

**Payload:**

```json
{
  "event": "live_chat.new_message",
  "data": {
    "id": "YOUR_MESSAGE_ID",
    "data": {
      "conversation_id": "YOUR_CONVERSATION_ID",
      "body": "/info",
      "sender": {
        "model_type": "third",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::
::

## 2. Sending Messages

To reply to a customer, make a `POST` request to the messages endpoint. For a detailed reference on sending various message types (text, location, interactive), see [Outgoing Messages](/developer-guides/livechat/outgoing-messages).

**Endpoint**: `POST https://api.digishare.ma/v1/messages`

::steps

### Prepare Payload

Construct a JSON body with the message content and target conversation ID.

### Send Request

Send the request with your Bearer Token.

### Verify

Ensure you receive a `200 OK` or `201 Created` response.
::

### Request Body

| Parameter         | Type    | Required | Description                                                    |
| :---------------- | :------ | :------- | :------------------------------------------------------------- |
| `body`            | String  | **Yes**  | Text content of the message.                                   |
| `conversation_id` | String  | **Yes**  | ID from the webhook event.                                     |
| `send_to_third`   | Boolean | **Yes**  | Set `true` to deliver to the user's platform (e.g., WhatsApp). |

### Example

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "body": "Hello! How can I help you?",
    "conversation_id": "YOUR_CONVERSATION_ID",
    "send_to_third": true
  }'
```

```js [JavaScript]
await fetch("https://api.digishare.ma/v1/messages", {
  method: "POST",
  headers: {
    Authorization: "Bearer YOUR_TOKEN",
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    body: "Hello! How can I help you?",
    conversation_id: "6934k9qq5orl5vrx",
    send_to_third: true,
  }),
});
```

::
