---
title: Campagnes WhatsApp (PDF)
description: Orchestrez des campagnes WhatsApp à grand volume avec des pièces jointes PDF dynamiques.
icon: i-lucide-megaphone
---

Ce guide montre comment envoyer une campagne WhatsApp avec une pièce jointe PDF.

::note
**Prérequis** :

- **Jeton Bearer** valide
- **ID de Modèle de Message** approuvé (par ex., `VOTRE_ID_MODELE`)
- **ID d'Étiquette d'Expéditeur** (par ex., `VOTRE_ID_EXPEDITEUR`)
::

## Méthode 1 : Base64 Intégré

Envoyez un fichier directement dans le payload sans téléchargement préalable. Idéal pour les fichiers uniques générés à la volée.

::steps

### Encoder le PDF

Convertissez votre fichier PDF en une chaîne Base64.

### Construire le Payload

Ajoutez la chaîne encodée à l'objet `base64_files`.

### Envoyer la Requête

La clé utilisée dans `base64_files` (par ex., `invoice_file_123`) doit correspondre à l'ID de variable d'en-tête.
::

::api-playground{method="POST" url="https://api.digishare.ma/v1/campaigns" description="Envoyez une campagne avec un fichier PDF Base64 intégré." :variables='{"token": "VOTRE_TOKEN", "templateId": "VOTRE_ID_MODELE", "fileMapKey": "invoice_file_123"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"title": "Campagne Facture", "message_template_id": "{templateId}", "base64_files": {"{fileMapKey}": {"base64": "data:application/pdf;base64,JVBERi0xLjQKJ...", "file_name": "facture", "mime_type": "application/pdf", "extension": "pdf"}}, "contacts_and_data": {"data": {"header": {"id": "{fileMapKey}"}, "wa_id": "%recipient.wa_id%"}, "contacts": [{"wa_id": "212600000000"}]}}'}
::

## Méthode 2 : Téléchargement en Deux Étapes

Téléchargez d'abord le fichier pour obtenir un `media_id`, puis utilisez cet ID dans votre campagne. Meilleur pour les fichiers volumineux ou les ressources réutilisées.

::tip
Utilisez la **Méthode Intégrée** pour les petits PDF et la **Méthode en Deux Étapes** pour les fichiers plus volumineux afin d'assurer de meilleures performances.
::

::steps

### Télécharger le Fichier

Faites un POST vers `/messagesTemplates` avec le contenu de votre fichier. Enregistrez l'`id` retourné.

### Envoyer la Campagne

Utilisez l'`id` retourné dans le champ `header.id` du payload de votre campagne.
::

### Étape 1 : Téléchargement

::api-playground{method="POST" url="https://api.digishare.ma/v1/messagesTemplates" description="Téléchargez un fichier PDF pour obtenir un ID média réutilisable." :variables='{"token": "VOTRE_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"type": "file", "category": "document", "file": {"base64": "data:application/pdf;base64,JVBERi0xLjQKJ...", "file_name": "facture", "mime_type": "application/pdf"}}'}
::

### Étape 2 : Envoi

::api-playground{method="POST" url="https://api.digishare.ma/v1/campaigns" description="Envoyez une campagne en utilisant l'ID média pré-téléchargé." :variables='{"token": "VOTRE_TOKEN", "mediaId": "ID_MEDIA_DE_ETAPE_1"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"title": "Campagne Facture", "contacts_and_data": {"data": {"header": {"id": "{mediaId}"}}, "contacts": [{"wa_id": "212600000000"}]}}'}
::
