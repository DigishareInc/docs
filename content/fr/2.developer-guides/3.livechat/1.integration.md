---
title: Intégration LiveChat
description: Activez la communication en temps réel en intégrant votre système au LiveChat Digishare.
icon: i-lucide-message-circle
---

Ce guide décrit l'intégration technique avec le système LiveChat de Digishare. L'intégration est bidirectionnelle :

1.  **Webhooks** : Votre système écoute les événements en temps réel (Nouvelles Conversations, Messages Entrants).
2.  **API** : Votre système renvoie des réponses à l'utilisateur via l'API Digishare.

::note
Assurez-vous d'avoir votre **Jeton d'accès** prêt. Voir [Authentification](/developer-guides/authentication) pour plus d'informations.
::

## 1. Webhooks

Votre système doit exposer un point de terminaison **POST** pour recevoir les payloads d'événements de Digishare.

### Événements

::accordion
::accordion-item{label="Nouvelle Conversation" icon="i-lucide-plus"}
**Événement** : `live_chat.new_conversation`

Déclenché lorsqu'un utilisateur initie une nouvelle conversation. Utilisez l' `data.id` (ID de conversation) pour envoyer des réponses.

**Payload :**

```json
{
  "event": "live_chat.new_conversation",
  "data": {
    "id": "ID_DE_VOTRE_CONVERSATION",
    "data": {
      "created_at": "2025-12-03T12:28:50.000000Z",
      "third": {
        "id": "ID_DE_VOTRE_TIERS",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::

::accordion-item{label="Message Entrant" icon="i-lucide-arrow-down-left"}
**Événement** : `live_chat.new_message`

Déclenché lorsqu'un client envoie un message.

**Payload :**

```json
{
  "event": "live_chat.new_message",
  "data": {
    "id": "ID_DE_VOTRE_MESSAGE",
    "data": {
      "conversation_id": "ID_DE_VOTRE_CONVERSATION",
      "body": "/info",
      "sender": {
        "model_type": "third",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::
::

## 2. Envoi de messages

Pour répondre à un client, effectuez une requête `POST` vers le point de terminaison des messages. Pour une référence détaillée sur l'envoi de divers types de messages (texte, localisation, interactif), voir [Messages Sortants](/developer-guides/livechat/outgoing-messages).

**Point de terminaison** : `POST https://api.digishare.ma/v1/messages`

::steps

### Préparer le Payload

Construisez un corps JSON avec le contenu du message et l'ID de la conversation cible.

### Envoyer la requête

Envoyez la requête avec votre Jeton Bearer.

### Vérifier

Assurez-vous de recevoir une réponse `200 OK` ou `201 Created`.
::

### Corps de la requête

| Paramètre         | Type    | Requis  | Description                                                       |
| :---------------- | :------ | :------ | :---------------------------------------------------------------- |
| `body`            | String  | **Oui** | Contenu textuel du message.                                       |
| `conversation_id` | String  | **Oui** | ID provenant de l'événement webhook.                              |
| `send_to_third`   | Boolean | **Oui** | Réglez sur `true` pour livrer sur la plateforme de l'utilisateur. |

### Exemple

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer VOTRE_JETON" \
  -H "Content-Type: application/json" \
  -d '{
    "body": "Bonjour ! Comment puis-je vous aider ?",
    "conversation_id": "ID_DE_VOTRE_CONVERSATION",
    "send_to_third": true
  }'
```

::
