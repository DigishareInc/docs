---
title: Intégration LiveChat
description: Activez la communication en temps réel en intégrant votre système avec Digishare LiveChat.
icon: i-lucide-message-circle
---

Ce guide décrit l'intégration technique avec le système Digishare LiveChat. L'intégration est bidirectionnelle :

1.  **Webhooks** : Votre système écoute les événements en temps réel (Nouvelles Conversations, Messages Entrants).
2.  **API** : Votre système envoie des réponses à l'utilisateur via l'API Digishare.

::note
Assurez-vous d'avoir votre **Jeton d'Accès** (Access Token). Voir [Authentification](/developer-guides/authentication) pour plus de détails.
::

## 1. Webhooks

Votre système doit exposer un point de terminaison **POST** pour recevoir les payloads d'événements de Digishare.

### Événements

::accordion
::accordion-item{label="Nouvelle Conversation" icon="i-lucide-plus"}
**Événement** : `live_chat.new_conversation`

Déclenché lorsqu'un utilisateur initie une nouvelle conversation. Utilisez `data.id` (ID de conversation) pour envoyer des réponses.

**Payload :**

```json
{
  "event": "live_chat.new_conversation",
  "data": {
    "id": "YOUR_CONVERSATION_ID",
    "data": {
      "created_at": "2025-12-03T12:28:50.000000Z",
      "third": {
        "id": "YOUR_THIRD_ID",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::

::accordion-item{label="Message Entrant" icon="i-lucide-arrow-down-left"}
**Événement** : `live_chat.new_message`

Déclenché lorsqu'un client envoie un message.

**Payload :**

```json
{
  "event": "live_chat.new_message",
  "data": {
    "id": "YOUR_MESSAGE_ID",
    "data": {
      "conversation_id": "YOUR_CONVERSATION_ID",
      "body": "/info",
      "sender": {
        "model_type": "third",
        "name": "Adil Chbada"
      }
    }
  }
}
```

::
::

## 2. Envoi de Messages

Pour répondre à un client, faites une requête `POST` au point de terminaison des messages. Pour une référence détaillée sur l'envoi de divers types de messages (texte, localisation, interactif), voir [Messages Sortants](/developer-guides/livechat/outgoing-messages).

**Point de terminaison** : `POST https://api.digishare.ma/v1/messages`

::steps

### Préparer le Payload

Construisez un corps JSON avec le contenu du message et l'ID de la conversation cible.

### Envoyer la Requête

Envoyez la requête avec votre Jeton Bearer.

### Vérifier

Assurez-vous de recevoir une réponse `200 OK` ou `201 Created`.
::

### Corps de la Requête

| Paramètre         | Type    | Requis  | Description                                                                      |
| :---------------- | :------ | :------ | :------------------------------------------------------------------------------- |
| `body`            | String  | **Oui** | Contenu textuel du message.                                                      |
| `conversation_id` | String  | **Oui** | ID provenant de l'événement webhook.                                             |
| `send_to_third`   | Boolean | **Oui** | Mettre à `true` pour livrer à la plateforme de l'utilisateur (par ex. WhatsApp). |

### Exemple

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "body": "Bonjour ! Comment puis-je vous aider ?",
    "conversation_id": "YOUR_CONVERSATION_ID",
    "send_to_third": true
  }'
```

::
