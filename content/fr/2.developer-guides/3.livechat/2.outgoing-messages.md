---
title: Messages Sortants
description: Référence détaillée pour l'envoi de messages texte, de localisation et interactifs via API.
icon: i-lucide-send
---

::warning
**Prérequis** : Vous devez avoir un ID de Conversation actif pour répondre à un utilisateur. Voir [Intégration LiveChat](/developer-guides/livechat/integration).
::

## 1. Enveloppe du Message

Chaque requête API utilise cette structure standard.

| Champ             | Type          | Description                                                                |
| :---------------- | :------------ | :------------------------------------------------------------------------- |
| `send_to_third`   | Boolean       | Mettre à `true` pour livrer via une plateforme externe (par ex. WhatsApp). |
| `conversation_id` | String        | ID unique pour la session de chat.                                         |
| `type`            | String        | Format du message : `text`, `location`, ou `interactive`.                  |
| `body`            | String/Object | Le contenu utile (varie selon le type).                                    |

## 2. Message Texte

Communication texte simple. Le `body` est une **chaîne de caractères**.

::api-playground{method="POST" url="https://api.digishare.ma/v1/messages" description="Envoyez un message texte simple à une conversation." :variables='{"token": "VOTRE_TOKEN", "conversationId": "VOTRE_CONVERSATION_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"send_to_third": true, "conversation_id": "{conversationId}", "type": "text", "body": "Bonjour Adil ! Votre commande est prête."}'}
::

## 3. Message de Localisation

Envoyez une épingle de carte statique.

::api-playground{method="POST" url="https://api.digishare.ma/v1/messages" description="Envoyez une épingle de localisation avec nom et adresse." :variables='{"token": "VOTRE_TOKEN", "conversationId": "VOTRE_CONVERSATION_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"send_to_third": true, "conversation_id": "{conversationId}", "type": "location", "body": {"latitude": 33.5731, "longitude": -7.5898, "name": "Digishare HQ", "address": "Casablanca, Maroc"}}'}
::

## 4. Messages Interactifs

Messages structurés pour un engagement amélioré.

### Boutons de Réponse

Idéal pour les confirmations rapides (Oui/Non). Maximum 3 boutons.

::api-playground{method="POST" url="https://api.digishare.ma/v1/messages" description="Envoyez des boutons de réponse interactifs pour des réponses rapides." :variables='{"token": "VOTRE_TOKEN", "conversationId": "VOTRE_CONVERSATION_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"send_to_third": true, "conversation_id": "{conversationId}", "type": "interactive", "body": {"type": "button", "header": {"type": "text", "text": "Confirmation"}, "body": {"text": "Confirmez-vous la réception ?"}, "action": {"buttons": [{"type": "reply", "reply": {"id": "btn_yes", "title": "Oui"}}, {"type": "reply", "reply": {"id": "btn_no", "title": "Non"}}]}}}'}
::

### Menu Liste

Idéal pour les options multiples (jusqu'à 10 lignes).

::api-playground{method="POST" url="https://api.digishare.ma/v1/messages" description="Envoyez un menu liste interactif avec des sections." :variables='{"token": "VOTRE_TOKEN", "conversationId": "VOTRE_CONVERSATION_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"send_to_third": true, "conversation_id": "{conversationId}", "type": "interactive", "body": {"type": "list", "header": {"type": "text", "text": "Menu Support"}, "body": {"text": "Choisissez une catégorie ci-dessous :"}, "action": {"button": "Sélectionner Option", "sections": [{"title": "Support Technique", "rows": [{"id": "row_1", "title": "Problèmes API", "description": "Aide à l'intégration"}, {"id": "row_2", "title": "Connexion", "description": "Accès au compte"}]}]}}}'}
::

### Demande de Localisation

Déclenche l'interface native "Envoyer la localisation".

::api-playground{method="POST" url="https://api.digishare.ma/v1/messages" description="Demandez à l'utilisateur de partager sa localisation." :variables='{"token": "VOTRE_TOKEN", "conversationId": "VOTRE_CONVERSATION_ID"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"send_to_third": true, "conversation_id": "{conversationId}", "type": "interactive", "body": {"type": "location_request_message", "body": {"text": "Veuillez partager votre localisation actuelle."}, "action": {"name": "send_location"}}}'}
::

## 5. Contraintes

| Type           | Composant          | Limite          |
| :------------- | :----------------- | :-------------- |
| **Texte**      | `body`             | 4096 Caractères |
| **Interactif** | `header`           | 60 Caractères   |
| **Interactif** | Titre `button`     | 20 Caractères   |
| **Interactif** | Titre ligne `list` | 24 Caractères   |
