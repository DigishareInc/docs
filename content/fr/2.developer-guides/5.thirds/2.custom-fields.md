---
title: Champs Personnalisés
description: Stocker et récupérer des métadonnées personnalisées sur vos entités Third.
icon: i-lucide-tags
---


Enrichissez vos contacts avec des données personnalisées. Digishare propose deux approches selon vos besoins.

---

## Choisissez Votre Approche

::card-group
::card{title="Champs Rapides" icon="i-lucide-zap"}
Stockez des données clé-valeur simples directement dans l'objet `data.custom_fields` du contact. Idéal pour les métadonnées basiques.
::

::card{title="Champs Avancés" icon="i-lucide-database"}
Utilisez l'API dédiée pour des données typées, indexées et filtrables. Meilleur pour l'analyse et le filtrage.
::
::

---

## Approche Rapide : `data.custom_fields`

Stockez des données personnalisées directement lors de la création ou mise à jour d'un contact. Les champs sont **automatiquement synchronisés** avec le système de Champs Personnalisés.

::tip
**Synchronisation automatique.** Lorsque vous utilisez `data.custom_fields`, les valeurs sont automatiquement enregistrées dans la base de données des Champs Personnalisés. Elles deviennent filtrables via `custom_filters` et les définitions sont auto-créées.
::

### Créer avec des Champs Personnalisés

::api-playground{method="POST" url="https://api.digishare.ma/v1/thirds" description="Créer un contact avec des champs personnalisés." :variables='{"token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"first_name": "Jean", "last_name": "Dupont", "email": "jean@example.com", "data": {"custom_fields": {"balance": 150.75, "loyalty_tier": "gold", "is_vip": true}}}'}
::

### Mettre à Jour les Champs Personnalisés

::api-playground{method="PATCH" url="https://api.digishare.ma/v1/thirds/{id}" description="Mettre à jour les champs personnalisés." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"data": {"custom_fields": {"balance": 200.00, "last_purchase": "2026-01-18"}}}'}
::

### Exemple de Réponse

```json
{
  "data": {
    "id": "xYz123AbC",
    "first_name": "Jean",
    "last_name": "Dupont",
    "data": {
      "company_name": "Acme Inc",
      "custom_fields": {
        "balance": 150.75,
        "loyalty_tier": "gold",
        "is_vip": true
      }
    }
  }
}
```

::note
**Confort et puissance.** Combinez simplicité d'un seul appel API avec la puissance du filtrage et de l'analytique.
::

---

## Approche Avancée : API Champs Personnalisés

Utilisez des endpoints dédiés pour des données typées et indexées supportant le filtrage.

### 1. Définir le Schéma (Optionnel)

Créez des définitions de champs pour garantir des types de données cohérents :

::api-playground{method="POST" url="https://api.digishare.ma/v1/custom-field-definitions" description="Définir un champ personnalisé." :variables='{"token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"key": "balance", "label": "Solde du Compte", "type": "float"}'}
::

#### Types Supportés

| Type | Exemple | Description |
|------|---------|-------------|
| `string` | `"gold"` | Valeurs texte |
| `int` | `42` | Nombres entiers |
| `float` | `150.75` | Nombres décimaux |
| `bool` | `true` | Vrai/Faux |
| `date` | `"2026-01-15"` | Date ISO |

### 2. Définir les Valeurs

Stocker des données typées sur un contact :

::api-playground{method="POST" url="https://api.digishare.ma/v1/thirds/{id}/custom-fields" description="Définir les valeurs des champs." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"fields": {"balance": 150.75, "order_count": 12, "is_vip": true}}'}
::

::tip
**Comportement de fusion.** Les champs existants sont préservés. Seuls les champs spécifiés sont mis à jour ou ajoutés.
::

### 3. Récupérer les Valeurs

Récupérer tous les champs personnalisés d'un contact :

::api-playground{method="GET" url="https://api.digishare.ma/v1/thirds/{id}/custom-fields" description="Récupérer les valeurs des champs." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}"}'}
::

### 4. Filtrer par Champs Personnalisés

Trouver des contacts par valeurs de champs personnalisés :

```bash
GET /v1/thirds?custom_filters={"balance":{"operator":">","value":100}}
```

#### Opérateurs Disponibles

| Opérateur | Description |
|-----------|-------------|
| `=` | Égal (défaut) |
| `>` | Supérieur à |
| `<` | Inférieur à |
| `>=` | Supérieur ou égal |
| `<=` | Inférieur ou égal |
| `!=` | Différent de |

### 5. Supprimer des Champs

Supprimer des champs spécifiques d'un contact :

::api-playground{method="DELETE" url="https://api.digishare.ma/v1/thirds/{id}/custom-fields" description="Supprimer des champs personnalisés." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"keys": ["balance", "order_count"]}'}
::

---

## Quand Utiliser Chaque Approche

| Cas d'usage | Champs Rapides | API Avancée |
|-------------|----------------|-------------|
| Métadonnées simples | ✅ Meilleur | Fonctionne |
| Un seul appel API | ✅ Oui | Nécessite un appel séparé |
| Validation de type | ❌ Non | ✅ Oui |
| Filtrage/Recherche | ❌ Non | ✅ Oui |
| Analytique | ❌ Limité | ✅ Meilleur |
| Haut volume | ❌ Limité | ✅ Indexé |

---

## Cas d'Usage Courants

::card-group
::card{title="Stats Client" icon="i-lucide-bar-chart-2"}
Suivre les commandes, la valeur vie et la fréquence d'achat.
::

::card{title="Préférences" icon="i-lucide-settings"}
Stocker newsletters, langue et paramètres de notification.
::

::card{title="Sync CRM" icon="i-lucide-refresh-cw"}
Synchroniser scores, étapes de pipeline et identifiants.
::

::card{title="Segmentation" icon="i-lucide-users"}
Filtrer les contacts par tier, dépenses ou comportement.
::
::
