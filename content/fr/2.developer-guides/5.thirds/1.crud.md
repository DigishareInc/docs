---
title: Opérations CRUD
description: Créer, lire, mettre à jour et supprimer des entités Third via l'API.
icon: i-lucide-database
---

# Opérations CRUD

Gérez vos contacts avec ces endpoints. Toutes les requêtes nécessitent une [authentification](/fr/developer-guides/authentication).

---

## Lister les Thirds

Récupérez tous les contacts avec pagination et filtrage.

::api-playground{method="GET" url="https://api.digishare.ma/v1/thirds" description="Obtenir une liste paginée de contacts." :variables='{"token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}"}'}
::

### Paramètres

| Paramètre  | Description                                        |
| ---------- | -------------------------------------------------- |
| `page`     | Numéro de page (défaut: 1)                         |
| `limit`    | Éléments par page (défaut: 15, max: 100)           |
| `search`   | Rechercher par nom, email ou téléphone             |
| `orderBy`  | Trier par champ (ex: `created_at`)                 |
| `sortedBy` | Direction du tri : `asc` ou `desc`                 |
| `include`  | Charger les relations : `tags`, `groups`, `source` |

### Exemple de Réponse

```json
{
  "data": [
    {
      "id": "xYz123AbC",
      "first_name": "Marie",
      "last_name": "Dupont",
      "email": "marie@example.com",
      "mobile": "+212612345678"
    }
  ],
  "meta": {
    "pagination": {
      "total": 150,
      "per_page": 15,
      "current_page": 1,
      "total_pages": 10
    }
  }
}
```

---

## Récupérer un Third

Récupérez un contact spécifique par son ID.

::api-playground{method="GET" url="https://api.digishare.ma/v1/thirds/{id}" description="Obtenir un contact spécifique." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}"}'}
::

### Paramètres

| Paramètre | Description                                                                    |
| --------- | ------------------------------------------------------------------------------ |
| `include` | Charger les relations : `tags`, `groups`, `source`, `tickets`, `conversations` |

### Exemple de Réponse

```json
{
  "data": {
    "id": "xYz123AbC",
    "first_name": "Marie",
    "last_name": "Dupont",
    "name": "Marie Dupont",
    "email": "marie@example.com",
    "mobile": "+212612345678",
    "wa_id": "212612345678",
    "address": "123 Rue Principale",
    "lang": "fr",
    "premium": true,
    "verified": true,
    "data": {
      "company_name": "TechCorp",
      "title": "Directrice"
    },
    "created_at": "2026-01-15T10:30:00Z"
  }
}
```

---

## Créer un Third

Ajoutez un nouveau contact à votre base de données.

::api-playground{method="POST" url="https://api.digishare.ma/v1/thirds" description="Créer un nouveau contact." :variables='{"token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"first_name": "Jean", "last_name": "Martin", "email": "jean@example.com", "mobile": "+212612345678"}'}
::

### Corps de la Requête

```json
{
  "first_name": "Jean",
  "last_name": "Martin",
  "email": "jean@example.com",
  "mobile": "+212612345678",
  "wa_id": "212612345678",
  "lang": "fr",
  "tags": ["prospect", "webinaire"],
  "data": {
    "company_name": "Acme Inc",
    "title": "Manager"
  }
}
```

### Champs Disponibles

**Infos de Base :** `first_name`, `last_name`, `name`, `email`, `mobile`, `phone`, `wa_id`

**Profil :** `address`, `address_2`, `lang`, `gender`, `birthday`

**Indicateurs :** `is_company`, `premium`, `verified`, `status`

**Relations :** `source_id`, `country_id`, `state_id`, `city_id`, `parent_id`

**Tableaux :** `tags`, `group_type_id`

**Étendu :** objet `data` (voir [Vue d'ensemble](/fr/developer-guides/thirds/overview#données-étendues))

::note
**Attribution automatique de l'entreprise.** Le `company_id` est automatiquement défini à partir de votre jeton d'authentification. Vous n'avez pas besoin de le transmettre.
::

::tip
**Les numéros de téléphone sont auto-formatés.** Nous standardisons `mobile`, `phone` et `wa_id` au format international E.164.
::

### Réponse

Retourne le contact créé avec `201 Created`.

---

## Mettre à Jour un Third

Modifiez un contact existant. Incluez uniquement les champs à modifier.

::api-playground{method="PATCH" url="https://api.digishare.ma/v1/thirds/{id}" description="Mettre à jour un contact." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}", "Content-Type": "application/json"}' :body='{"premium": true, "verified": true}'}
::

### Corps de la Requête

```json
{
  "premium": true,
  "verified": true,
  "data": {
    "title": "Directeur Général"
  }
}
```

::note
**Mises à jour partielles.** Les champs non inclus dans la requête restent inchangés.
::

::warning
**Remplacement des groupes.** Le tableau `group_type_id` remplace tous les groupes existants. Incluez les groupes actuels pour les conserver.
::

### Réponse

Retourne le contact mis à jour avec `200 OK`.

---

## Supprimer un Third

Supprimez un contact de votre base de données.

::api-playground{method="DELETE" url="https://api.digishare.ma/v1/thirds/{id}" description="Supprimer un contact." :variables='{"id": "THIRD_ID", "token": "YOUR_ACCESS_TOKEN"}' :headers='{"Authorization": "Bearer {token}"}'}
::

::warning
**Suppression douce.** Le contact est marqué comme supprimé mais peut être restauré par un administrateur.
::

### Réponse

Retourne `204 No Content` en cas de succès.

---

## Gestion des Erreurs

### Erreurs Courantes

| Statut | Signification              |
| ------ | -------------------------- |
| `401`  | Token invalide ou manquant |
| `403`  | Permissions insuffisantes  |
| `404`  | Contact non trouvé         |
| `422`  | Validation échouée         |

### Exemple d'Erreur de Validation

```json
{
  "message": "Les données fournies sont invalides.",
  "errors": {
    "wa_id": ["Cet ID WhatsApp est déjà utilisé."],
    "ext_ref": ["La référence externe doit être unique."]
  }
}
```

---

## Et Ensuite ?

::card-group
::card{title="Champs Personnalisés" icon="i-lucide-tags" to="/fr/developer-guides/thirds/custom-fields"}
Ajoutez des métadonnées personnalisées à vos contacts.
::

::card{title="Retour à la Vue d'ensemble" icon="i-lucide-arrow-left" to="/fr/developer-guides/thirds/overview"}
Consultez la structure de l'objet Third.
::
::
