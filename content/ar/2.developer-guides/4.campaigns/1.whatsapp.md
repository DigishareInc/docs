---
title: حملات WhatsApp
description: تنظيم حملات WhatsApp عالية الحجم باستخدام قوالب الرسائل.
icon: i-lucide-smartphone
---

يوضح هذا الدليل كيفية إرسال حملة WhatsApp باستخدام قوالب معتمدة مسبقًا. هذه هي الطريقة القياسية للبث عالي الحجم وإشعارات التسويق.

::note
**المتطلبات الأساسية**:

- **رمز Bearer** صالح
- **معرف قالب الرسالة** المعتمد (مثال: `YOUR_TEMPLATE_ID`)
- **معرف تسمية المرسل** (مثال: `YOUR_SENDER_ID`) الذي يمثل قناة WhatsApp الخاصة بك.
  ::

## 1. هيكل الـ Payload

لإرسال حملة، قم بتقديم طلب POST بجسم JSON إلى `/v1/campaigns`.

### المتغيرات الشائعة

- `title`: اسم للحملة (للتتبع الداخلي).
- `contacts_and_data`: يحتوي على تكوين الرسالة وقائمة المستلمين.
- `_`: (داخل `contacts_and_data`) التكوين العالمي للحملة.
  - `channel`: `whatsapp`
  - `sender_label_id`: معرف قناة الإرسال الخاصة بك.
  - `message_template_id`: معرف القالب الذي تريد إرساله.

## 2. مثال: قالب قياسي

إذا كان قالبك رسالة نصية بسيطة مع متغير مثل `مرحباً {{1}}، طلبك {{2}} جاهز.`، فسيبدو الـ payload كالتالي:

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/campaigns \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "حملة الترحيب",
    "contacts_and_data": {
      "_": {
        "channel": "whatsapp",
        "sender_label_id": "YOUR_SENDER_ID",
        "message_template_id": "YOUR_TEMPLATE_ID"
      },
      "contacts": [
        {
          "wa_id": "212600000000",
          "data": {
            "1": "John",
            "2": "ORD-123"
          }
        },
        {
          "wa_id": "212600000001",
          "data": {
            "1": "Jane",
            "2": "ORD-456"
          }
        }
      ]
    }
  }'
```

::

## 3. المتغيرات الديناميكية

غالباً ما تستخدم قوالب WhatsApp القياسية متغيرات مرقمة (`{{1}}`, `{{2}}`). في قائمة `contacts` الخاصة بك، تقدم هذه القيم في كائن `data` لكل مستلم.

::tip
تأكد دائماً من أن عدد المتغيرات في كائن `data` يطابق المتغيرات المتوقعة في قالبك المعتمد لتجنب فشل التسليم.
::

## 4. الجدولة (اختياري)

يمكنك جدولة حملة للمستقبل عن طريق إضافة خاصية `start_datetime` (تنسيق ISO 8601) إلى الـ payload في المستوى الأعلى.

```json
{
  "title": "حملة مجدولة",
  "start_datetime": "2025-06-01T10:00:00Z",
  "contacts_and_data": { ... }
}
```
