---
title: حملات WhatsApp (PDF)
description: تنظيم حملات WhatsApp عالية الحجم مع مرفقات PDF ديناميكية.
icon: i-lucide-megaphone
---

يوضح هذا الدليل كيفية إرسال حملة WhatsApp مع مرفق PDF.

::note
**المتطلبات الأساسية**:

- **رمز Bearer** صالح
- **معرف قالب الرسالة** المعتمد (مثال: `YOUR_TEMPLATE_ID`)
- **معرف تسمية المرسل** (مثال: `YOUR_SENDER_ID`)
  ::

## الطريقة 1: Base64 المدمج

إرسال ملف مباشرة في الـ payload دون رفعه مسبقاً. مثالي للملفات التي يتم إنشاؤها لمرة واحدة وبسرعة.

::steps

### تشفير PDF

قم بتحويل ملف PDF الخاص بك إلى سلسلة Base64.

### بناء الـ Payload

أضف السلسلة المشفرة إلى كائن `base64_files`.

### إرسال الطلب

يجب أن يطابق المفتاح المستخدم في `base64_files` (مثل `invoice_file_123`) معرف متغير الرأس (header).
::

::code-group

```bash [cURL]
curl -X POST https://api.digishare.ma/v1/campaigns \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "حملة الفواتير",
    "message_template_id": "YOUR_TEMPLATE_ID",
    "base64_files": {
      "YOUR_FILE_MAP_KEY": {
        "base64": "data:application/pdf;base64,JVBERi0xLjQKJ...",
        "file_name": "invoice",
        "mime_type": "application/pdf",
        "extension": "pdf"
      }
    },
    "contacts_and_data": {
      "data": {
        "header": { "id": "YOUR_FILE_MAP_KEY" },
        "wa_id": "%recipient.wa_id%"
      },
      "contacts": [
        { "wa_id": "212600000000" }
      ]
    }
  }'
```

::

## الطريقة 2: الرفع في خطوتين

ارفع الملف أولاً للحصول على `media_id` ، ثم استخدم هذا المعرف في حملتك. أفضل للملفات الكبيرة أو الأصول التي يتم إعادة استخدامها.

::tip
استخدم **طريقة Base64 المدمج** لملفات PDF الصغيرة و **طريقة الرفع في خطوتين** للملفات الأكبر لضمان أداء أفضل.
::

::steps

### رفع الملف

قم بإرسال طلب POST إلى `/messagesTemplates` مع محتوى ملفك. احفظ المعرف (`id`) المرتجع.

### إرسال الحملة

استخدم المعرف المرتجع في حقل `header.id` الخاص بـ payload حملتك.
::

### الخطوة 1: الرفع

::code-group

```bash [طلب الرفع]
curl -X POST https://api.digishare.ma/v1/messagesTemplates \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "type": "file",
    "category": "document",
    "file": {
      "base64": "...",
      "file_name": "invoice",
      "mime_type": "application/pdf"
    }
  }'
```

::

### الخطوة 2: الإرسال

```bash [طلب الإرسال]
curl -X POST https://api.digishare.ma/v1/campaigns \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "حملة الفواتير",
    "contacts_and_data": {
      "data": {
        "header": {
          "id": "MEDIA_ID_FROM_STEP_1"
        }
      }
    }
  }'
```
